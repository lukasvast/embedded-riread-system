\hypertarget{_ri_read_8c}{}\section{Opis datoteke C\+:/\+Ri\+Read/\+Ri\+Read.c}
\label{_ri_read_8c}\index{C\+:/\+Ri\+Read/\+Ri\+Read.\+c@{C\+:/\+Ri\+Read/\+Ri\+Read.\+c}}


Glavni programski kod.  


{\ttfamily \#include $<$avr/io.\+h$>$}\\*
{\ttfamily \#include $<$avr/eeprom.\+h$>$}\\*
{\ttfamily \#include $<$string.\+h$>$}\\*
{\ttfamily \#include $<$inttypes.\+h$>$}\\*
{\ttfamily \#include $<$util/delay.\+h$>$}\\*
{\ttfamily \#include $<$stdlib.\+h$>$}\\*
{\ttfamily \#include $<$avr/wdt.\+h$>$}\\*
{\ttfamily \#include $<$avr/pgmspace.\+h$>$}\\*
{\ttfamily \#include $<$avr/interrupt.\+h$>$}\\*
{\ttfamily \#include \char`\"{}Ri\+Read.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}S\+S\+D1289x16.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}Font.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ft18x34.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}Graphic.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}Usart.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}String\+Processing.\+h\char`\"{}}\\*
\subsection*{Definicije}
\begin{DoxyCompactItemize}
\item 
\hypertarget{_ri_read_8c_a43bafb28b29491ec7f871319b5a3b2f8}{}\#define \hyperlink{_ri_read_8c_a43bafb28b29491ec7f871319b5a3b2f8}{F\+\_\+\+C\+P\+U}~8000000\+U\+L\label{_ri_read_8c_a43bafb28b29491ec7f871319b5a3b2f8}

\begin{DoxyCompactList}\small\item\em Definiranje frekvencije oscilatora. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Funkcije}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{_ri_read_8c_a1e3b6d38df0786ccf7f938d60e386aae}{Init} ()
\begin{DoxyCompactList}\small\item\em Init funkcija -\/ Inicijalizacija portova i pinova, omogućavanje prekida, odabir fonta, resetiranje L\+C\+D-\/a, postavljanje U\+B\+R\+R vrijednosti za U\+S\+A\+R\+T. \end{DoxyCompactList}\item 
void \hyperlink{_ri_read_8c_ae6799935639df0d71bdcb36b1acf1574}{Print\+L\+C\+D} (uint16\+\_\+t left, uint16\+\_\+t top, uint16\+\_\+t right, uint16\+\_\+t bottom, char $\ast$Text, uint8\+\_\+t align, uint16\+\_\+t color, uint8\+\_\+t scale)
\begin{DoxyCompactList}\small\item\em Funkcija kojom pojednostavljujemo ispis teksta na L\+C\+D. \end{DoxyCompactList}\item 
int \hyperlink{_ri_read_8c_aab6364c36e6f7b981aed72a4a1b3be0e}{Provjeri\+Tip\+Kartice} (int identifikator)
\begin{DoxyCompactList}\small\item\em Funkcija koja vraća tip kartice. \end{DoxyCompactList}\item 
void \hyperlink{_ri_read_8c_acc1d46441b32dc33c7c39f0949f591dc}{Dohvati\+Podatke} (char $\ast$string, int tip\+Kartice)
\begin{DoxyCompactList}\small\item\em Funkcija koja parsa string pročitan s kartice. \end{DoxyCompactList}\item 
\hypertarget{_ri_read_8c_a812ca4b38edb2b336c9f6f1ebde571dc}{}void \hyperlink{_ri_read_8c_a812ca4b38edb2b336c9f6f1ebde571dc}{Deklariraj\+Na\+Nulu} ()\label{_ri_read_8c_a812ca4b38edb2b336c9f6f1ebde571dc}

\begin{DoxyCompactList}\small\item\em Funkcija koja postavlja sve stringove na nulu. \end{DoxyCompactList}\item 
\hypertarget{_ri_read_8c_a64dc55cba2f7dbda0ca616f06d2dbdf3}{}void \hyperlink{_ri_read_8c_a64dc55cba2f7dbda0ca616f06d2dbdf3}{Show\+Welcome\+Screen} ()\label{_ri_read_8c_a64dc55cba2f7dbda0ca616f06d2dbdf3}

\begin{DoxyCompactList}\small\item\em Funkcija koja prikazuje zaslon dobrodošlice, iscrtava logo, ispisuje naziv aplikacije i autora. \end{DoxyCompactList}\item 
int \hyperlink{_ri_read_8c_ab143be18bb7bad59818345887b1c4610}{Login\+Xicom} ()
\begin{DoxyCompactList}\small\item\em Funkcija koja prikazuje zaslon za prijavu. \end{DoxyCompactList}\item 
int \hyperlink{_ri_read_8c_ab43af84b07639990cc14857c7506ee5f}{Show\+Login\+Screen} (int broj\+Znakova)
\begin{DoxyCompactList}\small\item\em Funkcija koja provjerava je li provučena X-\/ica te shodno tome ispisuje status (E\+R\+R\+O\+R $\vert$$\vert$ S\+U\+C\+C\+E\+S\+S) na Login screenu. \end{DoxyCompactList}\item 
\hypertarget{_ri_read_8c_ac102fa78a1a67b62e5eb8ee8a518b7d5}{}void \hyperlink{_ri_read_8c_ac102fa78a1a67b62e5eb8ee8a518b7d5}{Show\+Card\+Screen} ()\label{_ri_read_8c_ac102fa78a1a67b62e5eb8ee8a518b7d5}

\begin{DoxyCompactList}\small\item\em Funkcija koja prikazuje \textquotesingle{}Card screen\textquotesingle{} zaslon nakon uspješne prijave X-\/icom, ispisuje pozdravnu poruku prijavljenom korisniku, njegovu privilegiju te menu podržanih kartica. \end{DoxyCompactList}\item 
int \hyperlink{_ri_read_8c_a4d79b0ce78c21d6e5c5bbc6ee5a949df}{Info\+Swipe} ()
\begin{DoxyCompactList}\small\item\em Funkcija koja čita jednu od podržanih kartica na Show\+Card screenu. \end{DoxyCompactList}\item 
\hypertarget{_ri_read_8c_aa85f6d644145ce7b60080e63caec13f8}{}void \hyperlink{_ri_read_8c_aa85f6d644145ce7b60080e63caec13f8}{Show\+Info\+Screen} ()\label{_ri_read_8c_aa85f6d644145ce7b60080e63caec13f8}

\begin{DoxyCompactList}\small\item\em Funkcija koja prikazuje formatirani ispis sadržaja ovisno o privilegijama i kartici. \end{DoxyCompactList}\item 
int \hyperlink{_ri_read_8c_a134b98d97d3006e401670b7f73914fd5}{Clear\+And\+Show\+New\+Screen} (int screen, int status)
\begin{DoxyCompactList}\small\item\em Funkcija koja očisti ekran te poziva različite screenove. \end{DoxyCompactList}\item 
\hypertarget{_ri_read_8c_a7c7e94222642ac7ef7fbd78412befe0d}{}void \hyperlink{_ri_read_8c_a7c7e94222642ac7ef7fbd78412befe0d}{force\+Hard\+Reset} ()\label{_ri_read_8c_a7c7e94222642ac7ef7fbd78412befe0d}

\begin{DoxyCompactList}\small\item\em Funkcija za Hard Reset pomoću Watchdog timera. \end{DoxyCompactList}\item 
\hypertarget{_ri_read_8c_ae66f6b31b5ad750f1fe042a706a4e3d4}{}int \hyperlink{_ri_read_8c_ae66f6b31b5ad750f1fe042a706a4e3d4}{main} ()\label{_ri_read_8c_ae66f6b31b5ad750f1fe042a706a4e3d4}

\begin{DoxyCompactList}\small\item\em Main funkcija -\/ izvođenje programa. \end{DoxyCompactList}\item 
\hypertarget{_ri_read_8c_afea150fcd685610cb9f7672fce361e53}{}\hyperlink{_ri_read_8c_afea150fcd685610cb9f7672fce361e53}{I\+S\+R} (I\+N\+T0\+\_\+vect)\label{_ri_read_8c_afea150fcd685610cb9f7672fce361e53}

\begin{DoxyCompactList}\small\item\em Interrupt service routine -\/ prekid I\+N\+T0 za reset i čišćenje E\+E\+P\+R\+O\+M-\/a. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detaljno objašnjenje}
Glavni programski kod. 



\subsection{Dokumentacije funkcija}
\hypertarget{_ri_read_8c_a134b98d97d3006e401670b7f73914fd5}{}\index{Ri\+Read.\+c@{Ri\+Read.\+c}!Clear\+And\+Show\+New\+Screen@{Clear\+And\+Show\+New\+Screen}}
\index{Clear\+And\+Show\+New\+Screen@{Clear\+And\+Show\+New\+Screen}!Ri\+Read.\+c@{Ri\+Read.\+c}}
\subsubsection[{Clear\+And\+Show\+New\+Screen}]{\setlength{\rightskip}{0pt plus 5cm}int Clear\+And\+Show\+New\+Screen (
\begin{DoxyParamCaption}
\item[{int}]{screen, }
\item[{int}]{status}
\end{DoxyParamCaption}
)}\label{_ri_read_8c_a134b98d97d3006e401670b7f73914fd5}


Funkcija koja očisti ekran te poziva različite screenove. 


\begin{DoxyParams}{Parametri}
{\em screen} & -\/ screen koji želimo prikazati \\
\hline
{\em status} & -\/ opcionalna vrijednost za uspješnost \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Povratne vrijednosti}
error -\/ uspješnost (-\/1 za neuspjeh, 0 za uspjeh) 
\end{DoxyReturn}


Definirano u liniji 521 datoteke Ri\+Read.\+c.

\hypertarget{_ri_read_8c_acc1d46441b32dc33c7c39f0949f591dc}{}\index{Ri\+Read.\+c@{Ri\+Read.\+c}!Dohvati\+Podatke@{Dohvati\+Podatke}}
\index{Dohvati\+Podatke@{Dohvati\+Podatke}!Ri\+Read.\+c@{Ri\+Read.\+c}}
\subsubsection[{Dohvati\+Podatke}]{\setlength{\rightskip}{0pt plus 5cm}void Dohvati\+Podatke (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{string, }
\item[{int}]{tip\+Kartice}
\end{DoxyParamCaption}
)}\label{_ri_read_8c_acc1d46441b32dc33c7c39f0949f591dc}


Funkcija koja parsa string pročitan s kartice. 

Parsani se podaci spremaju u globalnu strukturu. 
\begin{DoxyParams}{Parametri}
{\em string} & -\/ string pročitan s kartice \\
\hline
{\em tip\+Kartice} & -\/ broj kartice pomoću kojeg se određuje način parsanja \\
\hline
\end{DoxyParams}


Definirano u liniji 108 datoteke Ri\+Read.\+c.

\hypertarget{_ri_read_8c_a4d79b0ce78c21d6e5c5bbc6ee5a949df}{}\index{Ri\+Read.\+c@{Ri\+Read.\+c}!Info\+Swipe@{Info\+Swipe}}
\index{Info\+Swipe@{Info\+Swipe}!Ri\+Read.\+c@{Ri\+Read.\+c}}
\subsubsection[{Info\+Swipe}]{\setlength{\rightskip}{0pt plus 5cm}int Info\+Swipe (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\label{_ri_read_8c_a4d79b0ce78c21d6e5c5bbc6ee5a949df}


Funkcija koja čita jednu od podržanih kartica na Show\+Card screenu. 

\begin{DoxyReturn}{Povratne vrijednosti}
0 -\/ S\+U\+C\+C\+E\+S\+S 
\end{DoxyReturn}


Definirano u liniji 342 datoteke Ri\+Read.\+c.

\hypertarget{_ri_read_8c_a1e3b6d38df0786ccf7f938d60e386aae}{}\index{Ri\+Read.\+c@{Ri\+Read.\+c}!Init@{Init}}
\index{Init@{Init}!Ri\+Read.\+c@{Ri\+Read.\+c}}
\subsubsection[{Init}]{\setlength{\rightskip}{0pt plus 5cm}void Init (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\label{_ri_read_8c_a1e3b6d38df0786ccf7f938d60e386aae}


Init funkcija -\/ Inicijalizacija portova i pinova, omogućavanje prekida, odabir fonta, resetiranje L\+C\+D-\/a, postavljanje U\+B\+R\+R vrijednosti za U\+S\+A\+R\+T. 

Omogućavanje prekida I\+N\+T0

J\+T\+A\+G interface onemogućen; kako bi se izbjegao statički eliktricitet na T\+D\+O pin

Inicijalizacija L\+C\+D kontrolnih pinova i M\+C\+U I/\+O pinova

fosc = 8.\+000\+M\+Hz, Baud rate 9600bps --$>$ U\+B\+R\+R = 51 

Definirano u liniji 33 datoteke Ri\+Read.\+c.

\hypertarget{_ri_read_8c_ab143be18bb7bad59818345887b1c4610}{}\index{Ri\+Read.\+c@{Ri\+Read.\+c}!Login\+Xicom@{Login\+Xicom}}
\index{Login\+Xicom@{Login\+Xicom}!Ri\+Read.\+c@{Ri\+Read.\+c}}
\subsubsection[{Login\+Xicom}]{\setlength{\rightskip}{0pt plus 5cm}int Login\+Xicom (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\label{_ri_read_8c_ab143be18bb7bad59818345887b1c4610}


Funkcija koja prikazuje zaslon za prijavu. 

\begin{DoxyReturn}{Povratne vrijednosti}
counter -\/ broj znakova pročitane kartice 
\end{DoxyReturn}


Definirano u liniji 227 datoteke Ri\+Read.\+c.

\hypertarget{_ri_read_8c_ae6799935639df0d71bdcb36b1acf1574}{}\index{Ri\+Read.\+c@{Ri\+Read.\+c}!Print\+L\+C\+D@{Print\+L\+C\+D}}
\index{Print\+L\+C\+D@{Print\+L\+C\+D}!Ri\+Read.\+c@{Ri\+Read.\+c}}
\subsubsection[{Print\+L\+C\+D}]{\setlength{\rightskip}{0pt plus 5cm}void Print\+L\+C\+D (
\begin{DoxyParamCaption}
\item[{uint16\+\_\+t}]{left, }
\item[{uint16\+\_\+t}]{top, }
\item[{uint16\+\_\+t}]{right, }
\item[{uint16\+\_\+t}]{bottom, }
\item[{char $\ast$}]{Text, }
\item[{uint8\+\_\+t}]{align, }
\item[{uint16\+\_\+t}]{color, }
\item[{uint8\+\_\+t}]{scale}
\end{DoxyParamCaption}
)}\label{_ri_read_8c_ae6799935639df0d71bdcb36b1acf1574}


Funkcija kojom pojednostavljujemo ispis teksta na L\+C\+D. 


\begin{DoxyParams}{Parametri}
{\em left} & -\/ lijeva koordinata \\
\hline
{\em top} & -\/ gornja koordinata \\
\hline
{\em right} & -\/ desna koordinata \\
\hline
{\em bottom} & -\/ donja koordinata \\
\hline
{\em $\ast$\+Text} & -\/ tekst za ispisati \\
\hline
{\em align} & -\/ željeno poravnanje teksta \\
\hline
{\em color} & -\/ željena boja teksta \\
\hline
{\em scale} & -\/ mijenjanje veličine, tj. skaliranje fonta \\
\hline
\end{DoxyParams}


Definirano u liniji 70 datoteke Ri\+Read.\+c.

\hypertarget{_ri_read_8c_aab6364c36e6f7b981aed72a4a1b3be0e}{}\index{Ri\+Read.\+c@{Ri\+Read.\+c}!Provjeri\+Tip\+Kartice@{Provjeri\+Tip\+Kartice}}
\index{Provjeri\+Tip\+Kartice@{Provjeri\+Tip\+Kartice}!Ri\+Read.\+c@{Ri\+Read.\+c}}
\subsubsection[{Provjeri\+Tip\+Kartice}]{\setlength{\rightskip}{0pt plus 5cm}int Provjeri\+Tip\+Kartice (
\begin{DoxyParamCaption}
\item[{int}]{identifikator}
\end{DoxyParamCaption}
)}\label{_ri_read_8c_aab6364c36e6f7b981aed72a4a1b3be0e}


Funkcija koja vraća tip kartice. 

Vraća se integer (u \hyperlink{_ri_read_8h}{Ri\+Read.\+h} u enum kartice su definirane vrijednosti). Popis kartica i duljina svake kartice se nalazi u polju popis\+Kartica također definirane u headeru. Vraća se vrijednost 0 ukoliko kartica ne postoji. 
\begin{DoxyParams}{Parametri}
{\em identifikator} & -\/ broj znakova koje pročitana kartica ima \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Povratne vrijednosti}
popis\+Kartica -\/ broj kartice 
\end{DoxyReturn}


Definirano u liniji 85 datoteke Ri\+Read.\+c.

\hypertarget{_ri_read_8c_ab43af84b07639990cc14857c7506ee5f}{}\index{Ri\+Read.\+c@{Ri\+Read.\+c}!Show\+Login\+Screen@{Show\+Login\+Screen}}
\index{Show\+Login\+Screen@{Show\+Login\+Screen}!Ri\+Read.\+c@{Ri\+Read.\+c}}
\subsubsection[{Show\+Login\+Screen}]{\setlength{\rightskip}{0pt plus 5cm}int Show\+Login\+Screen (
\begin{DoxyParamCaption}
\item[{int}]{broj\+Znakova}
\end{DoxyParamCaption}
)}\label{_ri_read_8c_ab43af84b07639990cc14857c7506ee5f}


Funkcija koja provjerava je li provučena X-\/ica te shodno tome ispisuje status (E\+R\+R\+O\+R $\vert$$\vert$ S\+U\+C\+C\+E\+S\+S) na Login screenu. 


\begin{DoxyParams}{Parametri}
{\em broj\+Znakova} & -\/ broj znakova pročitane kartice \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Povratne vrijednosti}
1 S\+U\+C\+C\+E\+S\+S 

-\/1 E\+R\+R\+O\+R 
\end{DoxyReturn}


Definirano u liniji 270 datoteke Ri\+Read.\+c.

